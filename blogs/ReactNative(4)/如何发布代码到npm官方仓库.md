---
title: ã€RNã€‘å¦‚ä½•å‘å¸ƒä»£ç åˆ°npmå®˜æ–¹ä»“åº“
date: 2019-12-18 13:07:23
categories: React Native
tags: 
- React Native
- npm
- ç§æœ‰ä»“åº“
---

## å‰è¨€

æœ‰æ—¶å€™æˆ‘ä»¬æƒ³æŠŠè‡ªå·±çš„ç»„ä»¶åƒåœ¨`github`ä¸Šæä¾›çš„ä»¥`npm`æ–¹å¼å®‰è£…åˆ°æœ¬åœ°çš„æ–¹å¼ç»™åˆ«äººç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ°[npmå®˜æ–¹ç½‘ç«™](https://www.npmjs.com/)æ³¨å†Œè‡ªå·±çš„è´¦å·å¹¶ä»¥`CLI`çš„å½¢å¼å°†è‡ªå·±çš„ä»£ç å‘å¸ƒåˆ°`npmå®˜æ–¹ä»“åº“`ã€‚

ä½†æ˜¯ï¼Œç›®å‰æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒåˆ°`npmå®˜æ–¹ä»“åº“`çš„ç»„ä»¶æˆ–åº“éƒ½æ˜¯**å…¬å¼€çš„**ï¼Œè¿™æ„å‘³ç€æ˜¯å¼€æºçš„ï¼Œä¹Ÿå°±æ˜¯**ä»»ä½•äººéƒ½å¯ä»¥æœç´¢åˆ°ä½ å‘å¸ƒçš„è¿™ä¸ªä»“åº“å¹¶ä¸”å®‰è£…ä½¿ç”¨**ã€‚

å®˜æ–¹ç›®å‰æä¾›`2`ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å…è´¹çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšæ‰è¯´çš„å…¬å¼€çš„ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šé™åˆ¶ä½ å‘å¸ƒå¤šå°‘åŒ…åˆ°`npm`ï¼Œä½ å‘å¸ƒåä¸ªã€ç™¾ä¸ªç”šè‡³ä¸Šåƒä¸ªéƒ½è¡Œï¼Œåªè¦ä½ å¼€å¿ƒï¼Œæƒ³å‘å°±å‘ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯æ”¶è´¹çš„ï¼Œå…·ä½“çš„ä»·æ ¼[npmå®˜æ–¹ä»·æ ¼è¯´æ˜](https://www.npmjs.com/products)ï¼Œå½“ç„¶ï¼Œè¿™ç§æ”¶è´¹çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒ**ç§æœ‰ä»“åº“**ï¼Œè¿™ç§**ç§æœ‰ä»“åº“**åˆ«äººæœªç»æˆæƒæ˜¯çœ‹ä¸åˆ°æ‘¸ä¸ç€ã€‚å¦‚æœä½ åªæ˜¯æƒ³æŠŠè‡ªå·±çš„ç»„ä»¶å¼€æºç»™åˆ«äººç”¨ï¼Œå‘æ‰¬å¼€æºç²¾ç¥ï¼Œé‚£ä¹ˆä½¿ç”¨å…è´¹çš„å°±å¯ä»¥äº†ï¼Œå¦‚æœä½ ä¸æƒ³æä¾›ç»™åˆ«äººç”¨ï¼Œæ¯”å¦‚è¯´æ˜¯å…¬å¸å†…éƒ¨çš„ä¸€äº›ä¸šåŠ¡ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶ç­‰ï¼Œé‚£ä¹ˆé™¤äº†`npm`å®˜æ–¹æ”¶è´¹çš„æ–¹å¼ä»¥å¤–ï¼Œä¹Ÿæœ‰ä¸€äº›å…¶ä»–åˆ›å»º**ç§æœ‰npmä»“åº“**çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œåªè®²å‘å¸ƒ**å…è´¹ç‰ˆ**çš„ä»“åº“ã€‚

## æ³¨å†Œ

é¦–å…ˆç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ³¨å†Œï¼Œ**ä½ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªnpmè´¦å·æ‰èƒ½å‘å¸ƒåŒ…**ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…é¡»çš„æ­¥éª¤ã€‚

- 1.[npmå®˜æ–¹ç½‘ç«™](https://www.npmjs.com/)ï¼Œç‚¹å‡»`Sign Up`

![Sign Up.png](https://i.loli.net/2019/12/18/ZhRYnaHIl1MNcG3.png)

- 2.å¡«å†™æ³¨å†Œä¿¡æ¯ï¼Œç„¶åç‚¹å‡»`Create an Account`

![Sign Up.png](https://i.loli.net/2019/12/18/Vwar9YP3XB5OGy4.png)

- 3.ç™»å½•é‚®ç®±ï¼Œå°†ç±»ä¼¼çº¢æ¡†ä¸­çš„é“¾æ¥å¤åˆ¶åˆ°ä½ çš„æµè§ˆå™¨ä¸­ï¼Œå›è½¦ï¼ŒéªŒè¯å®Œæ¯•

![Verify Email.png](https://i.loli.net/2019/12/18/4KdZJtUsyYQmqXA.png)

- 4.æ³¨å†ŒæˆåŠŸï¼Œä½ å°†çœ‹åˆ°å¦‚ä¸‹ç•Œé¢

![Success.png](https://i.loli.net/2019/12/18/R5H94eqfsn3J1Uh.png)

## åˆ›å»º&å‘å¸ƒåŒ…

- 1.æ‰“å¼€`terminal`ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºæµ‹è¯•ä»“åº“ï¼Œæ‰§è¡Œ`npm adduser`

![init.png](https://i.loli.net/2019/12/18/TDpUZVaYlxEArmb.png)

> å›¾ä¸­çš„`langke_npm`æ˜¯æˆ‘è‡ªå·±éšä¾¿åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±éšæ„å‘½ååˆ›å»ºï¼Œå¼€å¿ƒå°±å¥½ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`npm login`æ¥ä»£æ›¿å‘½ä»¤`npm adduser`ï¼Œä¸¤è€…å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¦‚æœä¸ä¿¡ï¼Œé‚£å°±çœ‹è¿™é‡Œ[è§è¯†ä¸€ä¸‹å®˜æ–¹npm login & npm adduser](https://docs.npmjs.com/cli/adduser.html)ã€‚ç„¶åï¼Œè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ï¼Œæ³¨æ„ï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™ä½ æ˜¯çœ‹ä¸è§çš„ï¼Œè¿™æ˜¯`terminal`ä¸ºäº†ä¿æŠ¤ä½ çš„å®‰å…¨ï¼Œåšäº†éšè—ï¼Œå‡ºç°ç±»ä¼¼`Logged in as langke007 on http://registry.npmjs.org/.`ï¼Œä½ å·²ç»ç™»å½•æˆåŠŸã€‚

- 2.åˆå§‹åŒ–ä»“åº“ï¼Œæ‰§è¡Œ`npm init`

![npm init.gif](https://i.loli.net/2019/12/18/LEk45XIV8bUORMA.gif)

> æ‰§è¡Œ`npm init`åï¼Œä¼šå¡«å†™ä¸€äº›ç›¸åº”ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºå¡«å†™å³å¯ï¼Œæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œç»“æŸåä¼šç”Ÿæˆä¸€ä¸ª`package.json`æ–‡ä»¶ï¼Œé‡Œé¢å°±åŒ…å«ä½ å¡«å†™çš„æ‰€æœ‰ä¿¡æ¯ã€‚

- 3.åˆ›å»º`README.md`ã€`index.js`æ–‡ä»¶

![instruction.png](https://i.loli.net/2019/12/18/nEWZzSJy3u9Hq6V.png)

- 4.å‘å¸ƒï¼Œæ‰§è¡Œ`npm publish`

```
âœ  langke_npm npm publish
npm notice
npm notice ğŸ“¦  langke_npm_demo@1.0.0
npm notice === Tarball Contents ===
npm notice 60B  index.js
npm notice 292B package.json
npm notice 33B  README.md
npm notice === Tarball Details ===
npm notice name:          langke_npm_demo
npm notice version:       1.0.0
npm notice package size:  410 B
npm notice unpacked size: 385 B
npm notice shasum:        730c17ff5fd22e05d0a1e05088b74066667c292d
npm notice integrity:     sha512-+80RanxwwDwTv[...]ZJDWYN+EDm37w==
npm notice total files:   3
npm notice
+ langke_npm_demo@1.0.0
```

![npm publish.gif](https://i.loli.net/2019/12/18/6HcM3zBEU5DCPIk.gif)

> è¿›å…¥åˆ°ç½‘é¡µï¼Œä½ å°±å¯ä»¥çœ‹åˆ°åˆšæ‰æ‰€å‘å¸ƒçš„åŒ…ï¼Œå…·ä½“è§ä¸Šå›¾ã€‚å¦‚æœå‘å¸ƒé‡åˆ°ç±»ä¼¼`npm ERR! no_perms Private mode enable, only admin can publish this module`çš„é”™è¯¯ï¼Œåº”è¯¥æ˜¯é•œåƒæºçš„é—®é¢˜ï¼Œä½¿ç”¨å®˜æ–¹é•œåƒæºï¼Œæ‰§è¡Œ`npm config set registry http://registry.npmjs.org`ã€‚

## ä½¿ç”¨åˆšæ‰å‘å¸ƒçš„åŒ…

æˆ‘è¿™é‡Œæ˜¯`React Native`é¡¹ç›®ï¼Œä½†æ˜¯éƒ½æ˜¯ä¸€æ ·çš„é“ç†ï¼Œåˆ°æ ¹ç›®å½•ä¸‹æ‰§è¡Œ

- 1.å®‰è£…

```
npm install langke_npm_demo
```

ç„¶ååœ¨é¡¹ç›®ä¸­çš„æ–‡ä»¶é‡Œå¯¼å…¥

- 2.ä½¿ç”¨

```
import {printHello} from 'langke_npm_demo';

...

printHello()
```

## å–æ¶ˆå‘å¸ƒ

ä½¿ç”¨å‘½ä»¤`npm unpublish <package-name> -f`æ¥å–æ¶ˆå‘å¸ƒï¼Œè¿™æ ·çš„è¯ï¼Œä½ åˆšæ‰å‘å¸ƒçš„åŒ…å°±ä¼šè¢«æ’¤å›ï¼Œç­‰äºæ²¡æœ‰å‘å¸ƒï¼

![npm unpublish.gif](https://i.loli.net/2019/12/18/nP2IotwfBvAJESK.gif)

## åœ¨æ–°ç”µè„‘æˆ–è€…æ–°ç›®å½•ä¸‹æ›´æ–°å¹¶å‘å¸ƒå·²æœ‰çš„npmåŒ…

å¦‚æœä½ æ¢äº†ä¸€å°æ–°ç”µè„‘ï¼Œæˆ–è€…åˆ é™¤äº†åˆšæ‰æ‰€åˆ›å»ºçš„`npm`åŒ…ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æ–°ç”µè„‘æˆ–è€…æ–°ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ

```
npm install <package-name>
```

å®‰è£…ç»“æŸåï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ª`node_modules`æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä½ åˆšæ‰åˆ›å»ºçš„`npm`åŒ…ï¼Œç„¶åä¸€åˆ‡éƒ½å’Œå‰é¢çš„å‘å¸ƒä¸€æ ·ï¼Œä¿®æ”¹ä»»æ„ä½ æƒ³ä¿®æ”¹çš„æ–‡ä»¶ï¼Œåœ¨æœ‰`package.json`æ–‡ä»¶çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ`npm publish`å°±å¯ä»¥äº†ã€‚ä½†æ˜¯è¦è®°ä½ï¼Œæ¯ä¸€æ¬¡å‘å¸ƒ`npm`åŒ…éƒ½éœ€è¦ä¿®æ”¹ç‰ˆæœ¬å·ï¼Œå¦åˆ™ä½ å°†å‘å¸ƒå¤±è´¥ï¼å…·ä½“ä¿®æ”¹ç‰ˆæœ¬å·åé¢ä¹Ÿæœ‰å¸¸ç”¨çš„é…å¥—å‘½ä»¤ä»‹ç»ï¼Œå¾€ä¸‹çœ‹ï¼Œæ²¡å…´è¶£çš„è¯ï¼Œå°±åˆ°æ­¤ä¸ºæ­¢ã€‚

## å…³è”github

æœ‰æ—¶å€™æˆ‘ä»¬çœ‹åˆ°åˆ«äººå‘å¸ƒåˆ°`npm`å®˜æ–¹ä»“åº“çš„åŒ…ï¼Œå…·æœ‰å¦‚ä¸‹çº¢æ¡†ä¸­çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å…³è”åˆ°`github`ï¼ŒåŒ…æ‹¬`Issues`ã€`Pull Requests`ç­‰ç­‰

![sample.png](https://i.loli.net/2019/12/18/zvshy1cAudSNgfJ.png)

ä¸ºäº†è®©æˆ‘ä»¬çš„å…¬å…±ä»“åº“ä¹Ÿèƒ½å…³è”åˆ°`github`ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»º`npm`åŒ…çš„æ—¶å€™å¡«å†™`git repository`ä¸€æ å¡«å†™`github`çš„æŸä¸ªä»“åº“çš„`https`åœ°å€ï¼Œå¦‚ä¸‹

![npm github.gif](https://i.loli.net/2019/12/18/iqIJEYM1fSTalsQ.gif)

> è¿™é‡Œæˆ‘å·²ç»æå‰åœ¨`github`ä¸Šåˆ›å»ºäº†ä¸€ä¸ª`langke-npm-demo1`çš„ä»“åº“äº†ï¼Œæ‰€ä»¥å…³è”åœ°å€çš„æ—¶å€™ï¼Œä¹‹åå¤åˆ¶è¿‡å»å°±å¥½äº†ã€‚

## ä¸€äº›å¸¸ç”¨npmå‘½ä»¤ä»‹ç»

- æŸ¥çœ‹å½“å‰ç™»å½•çš„npmç”¨æˆ·

```
npm whoami
```

- æŸ¥çœ‹npmé…ç½®

```
npm config ls
```

- æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„npmé•œåƒæº

```
npm config get registry
```

- åˆ‡æ¢npmé•œåƒæº

```
npm config set registry ã€è¿™é‡Œæ˜¯é•œåƒæºurlã€‘
```

### npmä¿®æ”¹ç‰ˆæœ¬å·

æ¯”å¦‚è¦å°†ç‰ˆæœ¬å·ä»`1.0.0`ä¿®æ”¹ä¸º`2.0.0`ï¼Œæœ‰`2`ç§æ–¹å¼

#### ä¸€ æ‰‹åŠ¨ä¿®æ”¹

ç›´æ¥ä¿®æ”¹`package.json`æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·

åŸæ¥çš„`package.json`å†…å®¹

```
{
  "name": "react-native-demo-for-npm",
  "version": "1.0.0",
  "description": "this is just a npm demo",
  ......
}
```

ä¿®æ”¹ä¸º

```
{
  "name": "react-native-demo-for-npm",
  "version": "2.0.0",
  "description": "this is just a npm demo",
  ......
}
```

#### äºŒ å‘½ä»¤ä¿®æ”¹

- 1.ä¿®æ”¹æŒ‡å®šç‰ˆæœ¬å·

åœ¨æœ‰`package.json`çš„å½“å‰ç›®å½•ä¸‹ï¼Œä½¿ç”¨

```
npm version æ–°ç‰ˆæœ¬å·
```

æ¯”å¦‚

```
npm version 2.0.0
```

è¿™æ ·çš„è¯ï¼Œåœ¨å‘å¸ƒä¹‹å‰ï¼Œå°±å¯ä»¥å°†ç‰ˆæœ¬å·ä»`1.0.0`ä¿®æ”¹ä¸º`2.0.0`äº†ã€‚

- 2.ç”±npmå‘½ä»¤ç”Ÿæˆæœ‰åºç‰ˆæœ¬å·

2.1) ä¿®æ”¹ä¸»ç‰ˆæœ¬å·ï¼Œå¦‚æœå½“å‰ç‰ˆæœ¬å·æ˜¯`1.0.0`ï¼Œè¦ä¿®æ”¹ä¸º`2.0.0`ï¼Œä½¿ç”¨

```
npm version major
```

> è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨äºåŒ…çš„å¤§å¹…åº¦æ”¹åŠ¨ï¼Œå¦‚å¢åŠ äº†å¤§é‡äº†`API`æˆ–è€…å‘ç”Ÿå…¶ä»–å¤§é‡çš„å†…å®¹ä¿®æ”¹ã€‚

2.2) ä¿®æ”¹æ¬¡ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚å½“å‰ç‰ˆæœ¬å·æ˜¯`1.0.0`ï¼Œè¦ä¿®æ”¹ä¸º`1.1.0`ï¼Œä½¿ç”¨

```
npm version minor
```

> è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨äºåŒ…çš„å°å¹…åº¦æ”¹åŠ¨ï¼Œæ¯”å¦‚å¢åŠ äº†ä¸€äº›`API`çš„å‰åå…¼å®¹ï¼Œæ‰©å±•ç­‰ç­‰ã€‚

2.3ï¼‰ä¿®æ”¹è¡¥ä¸ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚å½“å‰ç‰ˆæœ¬å·æ˜¯`1.0.0`ï¼Œè¦ä¿®æ”¹ä¸º`1.0.1`ï¼Œä½¿ç”¨

```
npm version patch
```

> è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨äºæ‰“è¡¥ä¸ï¼Œä¹Ÿå°±æ˜¯ä¸€äº›`bug`ä¿®å¤ï¼Œæ²¡æœ‰åšå…¶ä»–å¤ªå¤§çš„å†…å®¹å˜åŒ–ã€‚

- æŸ¥çœ‹å·²å‘å¸ƒçš„npmåŒ…æ‰€æœ‰ç‰ˆæœ¬

```
npm view react-native-demo-for-npm versions
```

### æ’¤é”€å·²ç»å‘å¸ƒçš„åŒ…

- ä¸€ æ’¤é”€æ•´ä¸ªåŒ…

1.1ï¼‰å¦‚æœå·²ç»å°†`npm`åŒ…å‘å¸ƒåˆ°è¿œç¨‹`npm`ä»“åº“ï¼Œä½†æ˜¯åˆæƒ³æ’¤é”€å‘å¸ƒ

```
npm unpublish <package-name> -f
```

æ¯”å¦‚ï¼Œå·²ç»å‘å¸ƒåˆ°`npm`ä»“åº“çš„åŒ…åå«åš`react-native-demo`ï¼Œé‚£ä¹ˆè¿è¡Œ

```
npm unpublish react-native-demo -f
```

åˆ™`react-native-demo`å°±ä»`npm`ä»“åº“ä¸Šåˆ é™¤äº†ï¼Œä½ ä¹Ÿæ— æ³•å†ä»`npm`ä»“åº“æœç´¢åˆ°è¿™ä¸ªåŒ…ã€‚

1.2ï¼‰å¦‚æœå¼€å¯äº†`2FA(two-factor authentication)`ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨`publish`åé¢åŠ ä¸Š`--otp=123456`ï¼Œè¿™é‡Œçš„`123456`æ˜¯æ‰‹æœºä¸Š`appï¼ˆappåç§°å«åš Authenticatorï¼‰`è·å–çš„æˆæƒç 

```
npm unpublish --otp=123456 react-native-demo -f
```

- äºŒ æ’¤é”€å…·ä½“çš„ç‰ˆæœ¬

2.1ï¼‰å¦‚æœæƒ³è¦æ’¤é”€å·²ç»å‘å¸ƒçš„å…·ä½“ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥ä½¿ç”¨

```
npm unpublish <package-name>@<version>
```

æ¯”å¦‚ï¼Œç°åœ¨æœ‰`2`ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯`v1.0.0`ã€`v1.2.0`ï¼Œæƒ³è¦æ’¤é”€`v1.2.0`ï¼Œå¯ä»¥

```
npm unpublish react-native-demo@1.2.0
```

2.2ï¼‰åŒæ ·åœ°ï¼Œå¦‚æœå¼€å¯äº†`2FA(two-factor authentication)`ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨`publish`åé¢åŠ ä¸Š`--otp=123456`ï¼Œè¿™é‡Œçš„`123456`æ˜¯æ‰‹æœºä¸Š`appï¼ˆappåç§°å«åš Authenticatorï¼‰`è·å–çš„æˆæƒç 

```
npm unpublish react-native-demo@1.2.0 --otp=123456
```

> æ³¨æ„ï¼šæ’¤é”€æ•´ä¸ªåŒ…æˆ–å…·ä½“çš„ç‰ˆæœ¬åªæœ‰åœ¨ä»å¼€å§‹å‘å¸ƒå†…çš„`72`å°æ—¶å†…æœ‰æ•ˆï¼Œå…·ä½“è§ [å®˜ç½‘ï¼šUnpublishing packages from the registry](https://docs.npmjs.com/unpublishing-packages-from-the-registry)

